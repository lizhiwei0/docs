<?xml version="1.0" encoding="UTF-8" standalone="no"?><map version="0.8.1"><node CREATED="1523932409546" ID="0eln7q3u2qkcqi9ubpvq8qujaf" MODIFIED="1523932409546" TEXT="MySql"><node CREATED="1523932409547" ID="1mr522sihfhvi8881iq44ic320" MODIFIED="1523932409547" POSITION="right" TEXT="实例"><node CREATED="1523932409547" ID="064c84pm8s16f4jcho0b9qt16n" MODIFIED="1523932409547" TEXT="InnoDB as engine"/><node CREATED="1523932409547" ID="33espsht6t3i8nsj0s776kniup" MODIFIED="1523932409547" TEXT="no more than 4096 tables"/><node CREATED="1523932409547" ID="6ght4vae301c9vpcmdiln1g7od" MODIFIED="1523932409547" TEXT="utf-8 as charset"/><node CREATED="1523932409547" ID="16qkgamd83reokfks14s3661i7" MODIFIED="1523932409547" TEXT="DB s"/><node CREATED="1523932409547" ID="4474alqkctbbrpdccfsl59cf5c" MODIFIED="1523932409547" TEXT="子主题 5"/></node><node CREATED="1523932409547" ID="437ncsvr3aal7374snjg8bflln" MODIFIED="1523932409547" POSITION="right" TEXT="MySql"><node CREATED="1523932409547" ID="5eiimtbhabuhb0bui1h5b7k2vp" MODIFIED="1523932409547" TEXT="表"><node CREATED="1523932409547" ID="1h3k5a96vi5ag6khdqgu43em4i" MODIFIED="1523932409547" TEXT="行数小于2000W"/><node CREATED="1523932409547" ID="6f3qp7c5vbqnk4k37itg0jn350" MODIFIED="1523932409547" TEXT="物理大小控制不超过16"/><node CREATED="1523932409547" ID="0p0lcibq4p32b6j17nn793pm6g" MODIFIED="1523932409547" TEXT="一定有primary key"/><node CREATED="1523932409547" ID="6s12e62bsrr0pvn2jqsf1vv5sq" MODIFIED="1523932409547" TEXT="TEXT',CLOB，BLOB单独建表，不能放主表里"/><node CREATED="1523932409547" ID="6qfhk8c7h34pt7q8i1mmb5oq0o" MODIFIED="1523932409547" TEXT="少于50列"/><node CREATED="1523932409547" ID="5tm4mivmq46sus4u85qi93qv1c" MODIFIED="1523932409547" TEXT="join的字段类型要严格一致"/><node CREATED="1523932409547" ID="28kmq5vaa3ir3knk248kvkshoa" MODIFIED="1523932409547" TEXT="要定期删除、转移的数据通过分区表解决"/><node CREATED="1523932409547" ID="6fu1j7oiaig6qtpip70lmm7f83" MODIFIED="1523932409547" TEXT="第三范式，尽量避免冗余"/><node CREATED="1523932409547" ID="79l9og37j4fhnkm4p2mhttvkbe" MODIFIED="1523932409547" TEXT="预估业务数据增长，对于数据较多的提前做分表设计"/><node CREATED="1523932409547" ID="33634193vnven9kgjgg7apdkg0" MODIFIED="1523932409547" TEXT="尽量避免外键关联"/><node CREATED="1523932409547" ID="3n13b3cc7j342kh33onavfhr9s" MODIFIED="1523932409547" TEXT="子主题 11"/></node></node><node CREATED="1523932409547" ID="1tb3n6c90bmi3e76s3u97o1r5h" MODIFIED="1523932409547" POSITION="right" TEXT="backup&amp;recovery"><node CREATED="1523932409547" ID="30j5tasf21cm6u33c8vuvb289d" MODIFIED="1523932409547" TEXT="1.备份&#13;&#10;&#13;&#10;1 [root@CentOS ~]# mysqldump -u root -p mysql &gt; ~/mysql.sql　　#把数据库mysql备份到家目录下命名为mysql.sql&#13;&#10;2 Enter password: &#13;&#10;3 [root@CentOS ~]# ls ~/mysql.sql &#13;&#10;/root/mysql.sql &#13;&#10;2.还原&#13;&#10;&#13;&#10;[root@CentOS ~]# mysql -u root -p web &lt; ~/web.sql　　#把web.sql导入数据库web"/></node><node CREATED="1523932409547" ID="0lh38seoreob7r0410j7hie6de" MODIFIED="1523932409547" POSITION="left" TEXT="performance turnning"><node CREATED="1523932409547" ID="5404939l3a6p3o710k5rbrnq0h" MODIFIED="1523932409547" TEXT="高级操作比较多，group/sort 可以通过explain sqlStatement 来看出执行计划。如果出现tempory table &amp; filesort 可以通过增加临时表空间来解决"><node CREATED="1523932409547" ID="1koioa4sqcm0v4kaivps2lvtdu" MODIFIED="1523932409547" TEXT="如果使用临时表那么就 增加临时表大小tmp_table_size。该参数指定一个临时表大小，如果临时表的数据超过该参数大小会被写入磁盘文件"/><node CREATED="1523932409548" ID="5djh97ecqknondod87h61gong0" MODIFIED="1523932409548" TEXT="order by比较多，或者执行计划里有filesore 就增加 sort_buffer_size "><node CREATED="1523932409548" ID="1kvn2b57b28ikggijcfaqmvth9" MODIFIED="1523932409548" TEXT="&#13;&#10;# For advice on how to change settings please see&#13;&#10;# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html&#13;&#10;&#13;&#10;[mysqld]&#13;&#10;&#13;&#10;########innodb engine configuration#############&#13;&#10;innodb_buffer_pool_size = 2048M&#13;&#10;innodb_file_io_threads = 4&#13;&#10;innodb_thread_concurrency = 8&#13;&#10;innodb_flush_log_at_trx_commit = 2&#13;&#10;innodb_log_buffer_size = 4M&#13;&#10;innodb_log_file_size = 128M&#13;&#10;innodb_log_files_in_group = 3&#13;&#10;innodb_lock_wait_tmeout = 120&#13;&#10;innodb_file_per_table = 0&#13;&#10;&#13;&#10;&#13;&#10;#&#13;&#10;# Remove leading # and set to the amount of RAM for the most important data&#13;&#10;# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.&#13;&#10;# innodb_buffer_pool_size = 128M&#13;&#10;#&#13;&#10;# Remove leading # to turn on a very important data integrity option: logging&#13;&#10;# changes to the binary log between backups.&#13;&#10;# log_bin&#13;&#10;&#13;&#10;transaction_isolation = READ-COMMITTED&#13;&#10;&#13;&#10;table_cache=20&#13;&#10;#&#13;&#10;# Remove leading # to set options mainly useful for reporting servers.&#13;&#10;# The server defaults are faster for transactions and fast SELECTs.&#13;&#10;# Adjust sizes as needed, experiment to find the optimal values.&#13;&#10;# join_buffer_size = 128M&#13;&#10;join_buffer_size = 2M&#13;&#10;sort_buffer_size = 2M&#13;&#10;query_cache_limit = 4M&#13;&#10;tmp_table_size = 64M&#13;&#10;key_buffer_size = 384M&#13;&#10;read_buffer_size = 1M&#13;&#10;read_rnd_buffer_size = 8M&#13;&#10;# read_rnd_buffer_size = 2M&#13;&#10;#skip-grant-tables&#13;&#10;datadir=/var/lib/mysql&#13;&#10;socket=/var/lib/mysql/mysql.sock&#13;&#10;&#13;&#10;# Disabling symbolic-links is recommended to prevent assorted security risks&#13;&#10;symbolic-links=0&#13;&#10;&#13;&#10;log-error=/var/log/mysqld.log&#13;&#10;pid-file=/var/run/mysqld/mysqld.pid&#13;&#10;"/></node></node></node></node></map>